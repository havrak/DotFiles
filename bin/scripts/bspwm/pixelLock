#!/usr/bin/env bash
scrot /tmp/screen.png
convert /tmp/screen.png -scale 10% -scale 1000% /tmp/screen.png
ICON=$HOME/bin/scripts/files/lock.png

KBD=""
case "$(xset -q|grep LED| awk '{ print $10 }')" in
  "00000000") KBD="$HOME/bin/scripts/files/eng.jpg" ;;
  "00000002") KBD="$HOME/bin/scripts/files/eng.jpg" ;;
  "00001000") KBD="$HOME/bin/scripts/files/cze.jpg" ;;
  "00001002") KBD="$HOME/bin/scripts/files/cze.jpg" ;;
  *) KBD="??" ;;
esac
convert /tmp/screen.png $ICON -gravity center -composite -matte /tmp/screen.png
convert /tmp/screen.png $KBD -gravity southwest -composite -matte /tmp/screen.png

mpc pause
i3lock -i /tmp/screen.png
rm /tmp/screen.png
