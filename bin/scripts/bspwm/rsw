#!/bin/sh
killClass() {
	for var in "$@" ; do
		pids=$(xdotool search --class ${var})
		while [ -n "$pids" ] ; do
			for pid in $pids; do
				xdo close $pid
			done
			pids=$(xdotool search --class ${var})
		done
	done
}
case "$1" in
	"-g" | "gpt")
		killClass gpt
		setsid -f st -c gpt &
		exit
		;;
	"-m" | "math")
		killClass math
		setsid -f st -c math -e python &
		exit
		;;
	"-r" | "rss")
		killClass rss
		setsid -f st -c rss -e newsboat
		exit
		;;
	"-n" | "notes")
		killClass notes
		setsid -f st -c notes -e nvim ~/vimwiki/index.wiki ~/dox/bookshelf/bookList.tex &
		exit
		;;
esac

killClass gpt notes math rss

setsid -f st -c gpt &
setsid -f st -c notes -e nvim -p ~/vimwiki/index.wiki ~/dox/bookshelf/bookList.tex &
setsid -f st -c math -e python &
setsid -f st -c rss -e newsboat &
exit
