#!/bin/sh

if [ "$XDG_SESSION_TYPE" = "wayland" ]; then
    menu_cmd="tofi --height=10% --prompt-text=Clipboard --horizontal=false --result-spacing=0 --num-results=20"
    copy_cmd="wl-copy"
else
    menu_cmd="dmenu -l 20"
    copy_cmd="xclip -selection clipboard"
    copy_cmd_primary="xclip -selection primary"
fi

text=$(cat $HOME/bin/scripts/files/clipboardText | $menu_cmd | awk -F " " '{for (i=2; i<=NF; i++) print $i}' )

if [ "$XDG_SESSION_TYPE" = "wayland" ]; then
    echo "$text" | $copy_cmd
else
    echo "$text" | $copy_cmd
    echo "$text" | $copy_cmd_primary
fi
